<!DOCTYPE html>
<html>
<head>
    <title>Firesphere Solr Search user/dev documentation</title>
    <style>
        /*! ADAPTED
      Typeplate : Starter Kit
      URL ........... http://typeplate.com
      Version ....... 3.0.2
      Github ........ https://github.com/typeplate/starter-kit
      Authors ....... Dennis Gaebel (@gryghostvisuals) & Zachary Kain (@zakkain)
      License ....... Creative Commmons Attribution 3.0
      License URL ... https://github.com/typeplate/starter-kit/blob/master/license.txt
      */

        h1,
        h2,
        h3,
        h4,
        h5,
        h6 {
            text-rendering: optimizeLegibility;
            line-height: 1;
            margin-top: 0;
            color: #222;
        }

        blockquote + figcaption cite {
            display: block;
            font-size: inherit;
            text-align: right;
        }

        body {
            word-wrap: break-word;
        }

        pre code {
            word-wrap: normal;
        }

        body {
            -webkit-hyphens: auto;
            -ms-hyphens: auto;
            hyphens: auto;
            color: #444;
        }

        h1 {
            font-size: 2em;
            /* 2*16 = 32 */
        }

        h2 {
            font-size: 1.5em;
            /* 1.5*16 = 24 */
        }

        h3 {
            font-size: 1.17em;
            /* 1.17*16 = 18.72 */
        }

        h4 {
            font-size: 1em;
            /* 1*16 = 16 */
        }

        h5 {
            font-size: 0.83em;
            /* 0.83*16 = 13.28 */
        }

        h6 {
            font-size: 0.75em;
            /* 0.75*16 = 12 */
        }

        h1 {
            margin: 2.42424rem 0 1.454544rem;
        }

        h2 {
            margin: 2.0202rem 0 1.21212rem;
        }

        h3 {
            margin: 1.61616rem 0 1rem;
        }

        h4 {
            margin: 1.21212rem 0 1;
        }

        h5 {
            margin: 0.80808rem 0;
        }

        h6 {
            margin: 0.70707rem 0;
        }

        p {
            margin: auto auto 1.5rem;
        }

        small {
            font-size: 65%;
        }

        input,
        abbr,
        acronym,
        blockquote,
        code,
        kbd,
        q,
        samp,
        var {
            -webkit-hyphens: none;
            -ms-hyphens: none;
            hyphens: none;
        }

        pre {
            white-space: pre;
        }

        pre code {
            white-space: -moz-pre-wrap;
            white-space: pre-wrap;
        }

        code {
            white-space: pre;
            font-family: SF Mono, Consolas, Dejavu Sans Mono, Menlo, monospace;
        }

        abbr {
            -webkit-font-variant: small-caps;
            -moz-font-variant: small-caps;
            -ms-font-variant: small-caps;
            font-variant: small-caps;
            font-weight: 600;
            text-transform: lowercase;
            color: gray;
        }

        abbr[title]:hover {
            cursor: help;
        }

        /* FROM http://purecss.io/layouts/side-menu/  adapted to remove pure classes*/

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
            Helvetica, Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji",
            "Segoe UI Symbol";
            color: #444;
        }

        img {
            max-width: 100%;
            height: auto;
            display: block;
            margin: auto;
        }

        code,
        pre {
            background-color: #f5f5f5;
            color: #444;
            border-radius: 2px;
            text-shadow: 0px 1px 0px white;
            box-shadow: 0 1px 1px rgba(0, 0, 0, 0.15);
        }

        pre code {
            border: none;
            box-shadow: none;
        }

        pre {
            padding: 0.5em;
        }

        code {
            display: inline-block;
            padding: 0 0.5em;
            line-height: 1.4;
            font-size: 0.9em;
        }

        table {
            border-spacing: 0;
            margin-bottom: 1.5rem;
        }

        table th,
        table td {
            padding: 0.3em 0.7em;
        }

        table th {
            background-color: #f4f4f4;
            border-bottom: 2px solid #444;
        }

        table td {
            border: 1px solid #f5f5f5;
        }

        /* Add transition to containers so they can push in and out. */

        #layout,
        #menu,
        .menu-link {
            -webkit-transition: all 0.2s ease-out;
            -moz-transition: all 0.2s ease-out;
            -ms-transition: all 0.2s ease-out;
            -o-transition: all 0.2s ease-out;
            transition: all 0.2s ease-out;
        }

        /* This is the parent `<div>` that contains the menu and the content area. */

        #layout {
            position: relative;
            padding-left: 0;
        }

        #layout.active #menu {
            left: 250px;
            width: 250px;
        }

        #layout.active .menu-link {
            left: 250px;
        }

        /* The content `<div>` is where all your content goes. */

        .content {
            margin: 50px auto;
            padding: 0 2em;
            max-width: 90%;
            line-height: 1.6em;
        }

        /*
        The `#menu` `<div>` is the parent `<div>` that contains the menu that
        appears on the left side of the page.
        */

        #menu {
            margin-left: -250px;
            /* "#menu" width */
            width: 250px;
            position: fixed;
            top: 0;
            left: 0;
            bottom: 0;
            z-index: 1000;
            /* so the menu or its navicon stays above all content */
            background: #f4f4f4;
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            font-size: 0.9em;
            overflow-x: hidden;
        }

        a,
        a * {
            text-decoration: none;
            color: #2483cc;
        }

        a:visited {
            text-decoration: none;
            color: #2483cc;
        }

        /* All anchors inside the menu should be styled like this. */

        #menu a {
            display: block;
            padding: 0.5em 0.5em;
        }

        #menu a:first-letter {
            text-transform: capitalize;
        }

        #menu ul {
            list-style-type: none;
            padding: 0;
            margin: 1em 0.5em;
        }

        #menu ul ul {
            margin-top: 0.5em;
            margin-left: 0.5em;
            border-left: 4px solid rgba(255, 255, 255, 0.5);
        }

        /* Change color of the anchor links on hover/focus. */

        #menu li a:hover,
        #menu li a:focus {
            background: rgba(255, 255, 255, 0.4);
        }

        /* This styles the selected menu item `<li>`. */

        #menu li a.active {
            background: rgba(0, 0, 0, 0.05);
        }

        /* This styles a link within a selected menu item `<li>`. */

        #menu li a.active {
            color: #222;
        }

        /* This styles the menu heading. */

        #menu li.heading {
            font-size: 0.9em;
            text-transform: uppercase;
            color: #000;
        }

        #menu li.heading > * {
            padding: 0.5em;
            display: block;
        }

        #menu li.heading a {
            color: #0c68af;
        }

        /* -- Dynamic Button For Responsive Menu -------------------------------------*/

        /*
        `.menu-link` represents the responsive menu toggle that shows/hides on
        small screens.
        */

        .menu-link {
            position: fixed;
            display: block;
            /* show this only on small screens */
            top: 0;
            left: 0;
            /* "#menu width" */
            font-size: 10px;
            /* change this value to increase/decrease button size */
            z-index: 10;
            width: 2em;
            height: auto;
            padding: 1.6em 1.2em;
            border-radius: 0 2px 2px 0;
        }

        .menu-link:hover {
            background: #f4f4f4;
        }

        .menu-link span {
            position: relative;
            display: block;
        }

        .menu-link span,
        .menu-link span:before,
        .menu-link span:after {
            background-color: #555;
            width: 100%;
            height: 0.2em;
            border-radius: 1em;
        }

        .menu-link span:before,
        .menu-link span:after {
            position: absolute;
            margin-top: -0.6em;
            content: " ";
        }

        .menu-link span:after {
            margin-top: 0.6em;
        }

        /* Hides the menu at `48em`, but modify this based on your app's needs. */

        @media (min-width: 48em) {
            .header,
            .content {
                padding-left: 2em;
                padding-right: 2em;
            }

            #layout {
                padding-left: 250px;
                /* left col width "#menu" */
                left: 0;
            }

            #menu {
                left: 250px;
            }

            .menu-link {
                position: fixed;
                left: 250px;
                display: none;
            }

            #layout.active .menu-link {
                left: 250px;
            }
        }

        @media (max-width: 48em) {
            /* Only apply this when the window is small. Otherwise, the following case results in extra padding on the left:
             * Make the window small.
             * Tap the menu to trigger the active state.
             * Make the window large again.
             */
            #layout.active {
                position: relative;
                left: 250px;
            }
        }

        /* Heading anchors and permalinks */
        h1[id],
        h2[id],
        h3[id],
        h4[id],
        h5[id],
        h6[id] {
            position: relative;
        }

        .heading-anchor-permalink {
            /* Position the permalink to the left of the title */
            position: absolute;
            right: 100%;
            /* Add some spacing as padding to not lose the hover */
            padding-right: 0.6rem;
            /* Make it only visible on heading hover, see below */
            opacity: 0;
        }

        h1[id]:hover .heading-anchor-permalink,
        h2[id]:hover .heading-anchor-permalink,
        h3[id]:hover .heading-anchor-permalink,
        h4[id]:hover .heading-anchor-permalink,
        h5[id]:hover .heading-anchor-permalink,
        h6[id]:hover .heading-anchor-permalink {
            opacity: 0.5;
        }
        .sticky-bottom {
            position: sticky;
            bottom: 10px;
            width: 100%;
            margin: 0;
            padding: 10px 0 10px 10px;
        }
    </style>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <meta charset="utf-8"/>
</head>

<body>
<div id="layout">
    <!-- Menu toggle -->
    <a href="#menu" id="menuLink" class="menu-link">
        <!-- Hamburger icon -->
        <span></span>
    </a>
    <nav id="menu">
        <ul>
<li><a class="" href="../index.html">index</a></li>
<li><a class="" href="../01-Installation.html">Installation</a></li>
<li><a class="" href="../02-Solr.html">Solr</a></li>
<li><a class="" href="../03-Usage.html">Usage</a></li>
<li><a class="" href="../04-Customisation.html">Customisation</a></li>
<li><a class="" href="../05-CMS-Usage.html">CMS Usage</a></li>
<li><a class="" href="../06-Debugging.html">Debugging</a></li>
<li><a class="" href="../07-Suggestions.html">Suggestions</a></li>
<li><a class="" href="../08-View-Permissions.html">View Permissions</a></li>
<li class="heading"><span>About</span></li>
<ul>
<li><a class="" href="../About/01-About.html">About</a></li>
<li><a class="" href="../About/02-Coverage.html">Coverage</a></li>
<li><a class="" href="../About/03-codebase-stats.html">codebase stats</a></li>
<li><a class="" href="../About/3-codebase-stats.html">codebase stats</a></li>
</ul>
<li class="heading"><span>Contributing</span></li>
<ul>
<li><a class="" href="../Contributing/01-Code-of-Conduct.html">Code of Conduct</a></li>
<li><a class="" href="../Contributing/02-Contributing.html">Contributing</a></li>
</ul>
<li class="heading"><span>Help</span></li>
<ul>
<li><a class="" href="01-Changelog.html">Changelog</a></li>
<li><a class="" href="02-FAQ.html">FAQ</a></li>
<li><a class="active" href="03-Known-issues.html">Known issues</a></li>
</ul>
<li class="heading"><span>Submodules</span></li>
<ul>
<li><a class="" href="../Submodules/01-Fulltext-Search-Compatibility.html">Fulltext Search Compatibility</a></li>
<li><a class="" href="../Submodules/02-Subsites.html">Subsites</a></li>
<li><a class="" href="../Submodules/03-Fluent.html">Fluent</a></li>
<li><a class="" href="../Submodules/04-Member-based-permissions.html">Member based permissions</a></li>
<li><a class="" href="../Submodules/05-Elemental.html">Elemental</a></li>
</ul>
</ul>
        <a class="sticky-bottom" href="https://enjoy.gitstore.app/repositories/Firesphere/silverstripe-solr-search"><img alt="Support our work on GitStore" src="https://enjoy.gitstore.app/repositories/badge-Firesphere/silverstripe-solr-search.svg" /></a>
    </nav>
    <article id="main" class="content">
        <h1 id="known-issues">Known issues <a class="heading-anchor-permalink" href="#known-issues">#</a></h1>
<h2 id="database-errors">Database errors <a class="heading-anchor-permalink" href="#database-errors">#</a></h2>
<p>Did you do a build?</p>
<p><code>https://yourdomain.com/dev/build?flush=all</code></p>
<p>It is known that the final index might throw a MySQL Exception.
This is expected at the moment, and sadly, unavoidable so far.
If you have a solution, we would love to hear from you!</p>
<h2 id="linux-hosts-with-vagrant">Linux hosts with Vagrant <a class="heading-anchor-permalink" href="#linux-hosts-with-vagrant">#</a></h2>
<p>There is a known issue with Linux hosts using Vagrant. Solr does not have
the correct write permissions, and Apache does not have the correct write permissions either.</p>
<p>This can be resolved by setting the folder of your Solr Core to <code>/var/solr/data</code>.</p>
<p>Then, create the following subfolders in the data folder:</p>
<ul>
<li><code>YourCoreName/conf</code></li>
<li><code>YourCoreName/data</code></li>
</ul>
<p>Then, add the <code>solr</code> user to the <code>apache</code> group (or <code>www-data</code>)
And the other way around, add apache to solr.</p>
<p>Change the ownership of the whole <code>YourCoreName</code> folder to <code>solr:apache</code>.</p>
<p>Change the permissions on <code>YourCoreName/conf</code> to be <code>777</code>.</p>
<p>This should, in theory, resolve your permission errors.</p>
<p>These errors are <em>not</em> related to this module, but on how Vagrant is set up on Linux.</p>
<p><strong>NOTE</strong></p>
<p>The name of your apache user could be different, so make sure you get it right.
After updating the group permissions, be sure to log out and back in again.</p>
<h2 id="solr-and-vagrant-issues%2C-pt.-2">Solr and Vagrant issues, pt. 2 <a class="heading-anchor-permalink" href="#solr-and-vagrant-issues%2C-pt.-2">#</a></h2>
<p>It’s also known that Solr won’t properly reload cores on Vagrant VM’s. This is outside
of control for this module, it is advised to restart Solr before and after a config change.</p>
<h2 id="solr-is-running-as-the-wrong-user">Solr is running as the wrong user <a class="heading-anchor-permalink" href="#solr-is-running-as-the-wrong-user">#</a></h2>
<p>For yet unknown reasons, even after following the Solr installation guide, it may happen
that Solr runs as the wrong user.</p>
<p>If this happens, the best course of action is to stop Solr and start it with the correct user:
<code>cd /opt/solr-8.3.1 &amp;&amp; sudo -u solr ./bin/solr start</code></p>
<p>Where <code>8.3.1</code> should reflect your current Solr version. Or, if you’ve allowed Solr to create
symlinks, the path could be <code>/opt/solr</code>.</p>
<h2 id="facets-do-not-show-anymore-since-the-latest-version">Facets do not show anymore since the latest version <a class="heading-anchor-permalink" href="#facets-do-not-show-anymore-since-the-latest-version">#</a></h2>
<p>Yep, the <code>XML</code> switch to non-deprecated options, which causes facets and filters to not work properly anymore.
Please re-index your Solr Core <code>vendor/bin/sake dev/tasks/SolrConfigureTask flush=all</code> followed
by <code>vendor/bin/sake dev/tasks/SolrIndexTask</code> from terminal is the most efficient way.</p>
<p>This is caused by a deprecated change in the Integer field on Solr level and can not be fixed in any
other way.</p>
<h2 id="localhost%3F">Localhost? <a class="heading-anchor-permalink" href="#localhost%3F">#</a></h2>
<p>Yes, for now, the config requires the host’s name to be <code>localhost</code>. This is not exactly by choice,
but due to how Solarium works. Stay tuned for updates.</p>
<h2 id="my-config-is-written-to-the-wrong-folder-(.solr)">My config is written to the wrong folder (<code>.solr</code>) <a class="heading-anchor-permalink" href="#my-config-is-written-to-the-wrong-folder-(.solr)">#</a></h2>
<p>This is probably due to an older version of this module, that had this bug. Please upgrade.</p>
<h2 id="i-can%E2%80%99t-get-it-to-work-on-live-or-uat">I can’t get it to work on Live or UAT <a class="heading-anchor-permalink" href="#i-can%E2%80%99t-get-it-to-work-on-live-or-uat">#</a></h2>
<p>We’re very sorry, but deployments of Solr differ so much per deployment, that we can’t
give any solid advice.</p>
<p>The best answer right now is following these steps:</p>
<ul>
<li>Install Solr as described in <a href="../02-Solr.html">Install Solr</a></li>
<li>Make sure the <code>data</code> folder is executable fully by Solr (<code>rxd</code> on Linux)</li>
<li>Make sure the <code>data/conf</code> folder is writeable by your PHP and the webserver (Apache2/Nginx/Caddy/Lighttpd etc.)</li>
<li>Run a local test of the live environment, ensuring all configs are good to go</li>
<li>If there are still errors, please contact your own sysadmin team first. They are most likely to be able to
resolve the problem</li>
</ul>
<h3 id="to-no-avail%2C-no-solution-worked">To no avail, no solution worked <a class="heading-anchor-permalink" href="#to-no-avail%2C-no-solution-worked">#</a></h3>
<p>If it is related to the module, and not related to actual permissions or other server set-up issues, and you
can not make a public issue, you can contact us at</p>
<p><code>solr[@]casa-laguna[.]net</code></p>
<p>Please note that we may charge you for investigating and helping solve your issues. This module is FOSS, but
our time is not unlimited and we may feel an issue is not worth the effort unless we get paid for our time.</p>

        <p>
        <a href="https://enjoy.gitstore.app/repositories/Firesphere/silverstripe-solr-search"><img alt="Support our work on GitStore" src="https://enjoy.gitstore.app/repositories/badge-Firesphere/silverstripe-solr-search.svg" /></a>
        </p>
    </article>
</div>
<script type="text/javascript">
    var _paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function () {
        var u = "https://piwik.casa-laguna.net/";
        _paq.push(['setTrackerUrl', u + 'matomo.php']);
        _paq.push(['setSiteId', '13']);
        var d = document, g = d.createElement('script'), s = d.getElementsByTagName('script')[0];
        g.type = 'text/javascript';
        g.async = true;
        g.defer = true;
        g.src = 'https://firesphere.github.io/solr-docs/matomo.js';
        s.parentNode.insertBefore(g, s);
    })();
</script>
<noscript><p><img src="https://piwik.casa-laguna.net/matomo.php?idsite=13&amp;rec=1" style="border:0;" alt=""/></p>
</noscript>
<script>
    // FROM http://purecss.io/js/ui.js
    (function (window, document) {
        var layout = document.getElementById("layout"),
            menu = document.getElementById("menu"),
            menuLink = document.getElementById("menuLink");

        function toggleClass(element, className) {
            var classes = element.className.split(/\s+/),
                length = classes.length,
                i = 0;

            for (; i < length; i++) {
                if (classes[i] === className) {
                    classes.splice(i, 1);
                    break;
                }
            }
            // The className is not found
            if (length === classes.length) {
                classes.push(className);
            }

            element.className = classes.join(" ");
        }

        menuLink.onclick = function (e) {
            var active = "active";

            e.preventDefault();
            toggleClass(layout, active);
            toggleClass(menu, active);
            toggleClass(menuLink, active);
        };
    })(this, this.document);
</script>
<script>
    (function () {
        var codeTags = document.querySelectorAll('code[class^="language-"]');
        for (var tag of codeTags) {
            tag.className = tag.className.replace("language-", "prettyprint lang-");
        }
    })();
</script>
<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>
</body>
</html>
